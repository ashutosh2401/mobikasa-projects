{% load render_table from django_tables2 %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Home page</title>
    </head>
    <center>
        <form name = "search" action = "" method = "GET">
            <label for = "text_box">Enter candidate to be searched<br>
            <input type = "text" id = "text_box" name = "text_box" required>
            <input type = "submit" value = "submit">
        </form>
    </center>
    <br><br>
    <body>
        <table class = "table" style = "margin-left:auto;margin-right:auto">
            <thead>
                <tr>
                    <th id = "s.no.">S.No.</th>
                    <th id = "fname">First Name</th>
                    <th id = "lname">Last Name</th>
                    <th id = "email">Email</th>
                    <th id = "password">Password</th>
                    <th id = "dob">Date of Birth</th>
                    <th id = "gender">Gender</th>
                    <th id = "hobbies">Hobbies</th>
                </tr>
            </thead>
            <tbody>
                {% for candidate in candidates%}
                    <tr>
                        <td>{{candidate.id}}</td>
                        <td>{{candidate.fname}}</td>
                        <td>{{candidate.lname}}</td>
                        <td>{{candidate.email}}</td>
                        <td>{{candidate.password}}</td>
                        <td>{{candidate.dob}}</td>
                        <td>{{candidate.gender}}</td>
                        <td>{{candidate.hobbies}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <center>{% render_table table %}</center>    
    </body>
    <script>
        let sno = document.getElementById("s.no.");
        sno.addEventListener("click",snobutton);

        function snobutton() {
            console.log("you have clicked sno button");
        }

        const xhr = new XMLHttpRequest();

        xhr.open('GET','text.txt',true);

        xhr.onprogress = function() {
            console.log("in progress");
        }

        xhr.onload = function() {
            if(this.status === 200){
                console.log(this.responseText);
            }
            else{
                console.error("some error occured");
            }
        };
        console.log("send");
        xhr.send();
        //let tableHead = document.getElementsByTagName("thead")[0];
        //tableHead.addEventListener("click", function(){
        //httpRequest = (url, method = 'GET') => {
        //    return new Promise((resolve, reject) => {
        //    const xhr = new XMLHttpRequest();
        //    xhr.open(method, url);
        //    xhr.onload = () => {
        //        if (xhr.status === 200) { resolve(xhr.responseText); }
        //        else { reject(new Error(xhr.responseText)); }
        //    };
        //    xhr.send();
        //    });}
        //});
    </script>
</html>